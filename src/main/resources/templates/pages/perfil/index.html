<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="common/header.html::header"></head>
  <body >
    <div id="app">
      <v-container>
       <v-row>
        <v-col cols="3">
          <v-row class="d-flex justify-center align-center" >
            <v-col cols="12">
              <v-text-field label="CPF" v-model="cpf"  dense clearable></v-text-field>
            </v-col>
            <v-col cols="12" align="center">
              <v-card height="65" >
               <v-card-text>
                 <span v-if="pessoa.nmFunc" 
                   >{{ pessoa.nrNip }} - {{ pessoa.nmFunc }}</span
                 >
               </v-card-text>
              </v-card>
              
            </v-col>
        
            <v-col cols="6">
              <v-autocomplete
                v-model="moduloSelecionado"
                :items="modulos.map((e) => e.cdProj + e.idModu)"
                dense
                label="Modulo"
                :disabled="!pessoa.nmFunc"
                @change="handleChangeModulo"
                
          
                
              ></v-autocomplete>
            </v-col>
            <v-col cols="6" data-app>
              <v-autocomplete
                v-model="oiSelecionado"
                :items="listaOi"
                item-label="oi"
                dense
                label="OI"
                @update:search-input="handleInputOi"
                
              ></v-autocomplete>
            </v-col>
          </v-row>
        </v-col>
        <v-col cols="9">
          <v-card>

            <v-layout align-start justify-center>
              <v-flex xs6 class="elevation-1 pa-3 ma-2">
                <v-list v-if="perfis" dense>
                  <v-subheader> PERFIS DISPON√çVEIS </v-subheader>
                  <!-- <draggable
                    v-model="perfis"
                    :options="{ group: 'people' }"
                    style="min-height: 10px"
                  > -->
                  <v-list-item v-for="(item, index) in perfis" :key="index">
                    <v-list-item-content>
                      <v-list-item-title
                        v-if="item.codigoNivelAcesso"
                        v-text="item.codigoNivelAcesso.idNivlAces"
                      ></v-list-item-title>
    
                      <!-- <v-list-item-subtitle
                        v-text="item.codigoNivelAcesso.idNivlAces"
                      ></v-list-item-subtitle> -->
                    </v-list-item-content>
    
                    <v-list-item-action>
                      <v-btn icon @click="associaPerfil(item)">
                        <v-icon color="grey lighten-1">mdi-arrow-right</v-icon>
                      </v-btn>
                    </v-list-item-action>
                  </v-list-item>
                  <!-- </draggable> -->
                </v-list>
              </v-flex>
              <v-flex xs6 class="elevation-1 pa-3 ma-2">
                <v-list v-if="perfisAssociados" two-line dense>
                  <v-subheader>
                    PERFIL ASSOCIADO: {{ moduloSelecionado }}</v-subheader
                  >
                  <!-- <draggable
                    v-model="perfisAssociados"
                    :options="{ group: 'people' }"
                    style="min-height: 10px"
                  > -->
                  <v-list-item
                    v-for="(item, index) in perfisAssociados"
                    :key="index"
                  >
                    <v-list-item-content>
                      <v-list-item-title
                        v-text="item.codigoNivelAcesso.idNivlAces"
                      ></v-list-item-title>
                      <v-list-item-subtitle>OI: {{ item.oi }}</v-list-item-subtitle>
                    </v-list-item-content>
    
                    <v-list-item-action>
                      <v-btn icon @click="desassociaPerfil(item)">
                        <v-icon color="grey lighten-1">mdi-close</v-icon>
                      </v-btn>
                    </v-list-item-action>
                  </v-list-item>
                  <!-- </draggable> -->
                </v-list>
              </v-flex>
            </v-layout>
          </v-card>
        </v-col>
       </v-row>
       
       
        
        <!-- <snackbar
        :open="snack.open"
        :text="snack.text"
        :color="snack.color"
        @close="snack.open = false"
      /> -->

        <v-snackbar
          v-model="snack.open"
          :timeout="snack.timeout"
          right
          :color="snack.color"
        >
          {{ snack.text }}
          <template v-slot:action="{ attrs }">
            <v-btn icon v-bind="attrs" @click="() => snack.open = false">
              <v-icon small dark> mdi-close </v-icon>
            </v-btn>
          </template>
        </v-snackbar>
      </v-container>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js" ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"
      
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
      
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/javascript-debounce@1.0.1/dist/javascript-debounce.js"
      
    ></script>
    <script src="js/custom/perfil.js" ></script>
  </body>
</html>
